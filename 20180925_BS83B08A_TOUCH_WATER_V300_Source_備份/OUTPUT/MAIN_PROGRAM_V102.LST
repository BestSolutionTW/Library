"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 1


   1  0000              
   2  0000              message '****************************************************************'
   3  0000              message '*PROJECT NAME :MAIN PROGRAM V102                               *'
   4  0000              message '*     VERSION :V102                                            *'
   5  0000              message '* ICE VERSION :                                                *'
   6  0000              message '*      DATE   :20150317                                        *'
   7  0000              message '*      REMARK :V102 modify ESCpowerIDcheck2,PBP                *'
   8  0000              message '****************************************************************'
   9  0000                              ;=INCLUDE REFERENCE FILE
  10  0000                              INCLUDE MAIN_PROGRAM_V102.INC














  11  0000              
  12  0000                              ;-PUBLIC LABEL
  13  0000                              PUBLIC  _LOAD_TKS_GLOBE_VARIES
  14  0000                              PUBLIC  _LOAD_HXT_REFERENCE
  15  0000              
  16  0000              CALL_   MACRO   FUNCTION
  17  0000                      ifdef   FUNCTION
  18  0000                              ifdef   PBP
  19  0000                              MOV     A,bank FUNCTION
  20  0000                              MOV     PBP,A
  21  0000                              endif
  22  0000                              CALL    FUNCTION
  23  0000                      endif
  24  0000                              ENDM
  25  0000              
  26  0000              EXTEND_FUNCTION_INITIAL MACRO
  27  0000                              CALL_   EXTEND_FUNCTION_1A_INITIAL
  28  0000                              CALL_   EXTEND_FUNCTION_1B_INITIAL
  29  0000                              CALL_   EXTEND_FUNCTION_1C_INITIAL
  30  0000                              CALL_   EXTEND_FUNCTION_1D_INITIAL
  31  0000                              CALL_   EXTEND_FUNCTION_1E_INITIAL
  32  0000                              CALL_   EXTEND_FUNCTION_1F_INITIAL
  33  0000                              CALL_   EXTEND_FUNCTION_1G_INITIAL
  34  0000                              CALL_   EXTEND_FUNCTION_1H_INITIAL
  35  0000              
  36  0000                              CALL_   EXTEND_FUNCTION_2A_INITIAL
  37  0000                              CALL_   EXTEND_FUNCTION_2B_INITIAL
  38  0000                              CALL_   EXTEND_FUNCTION_2C_INITIAL
  39  0000                              CALL_   EXTEND_FUNCTION_2D_INITIAL
  40  0000                              CALL_   EXTEND_FUNCTION_2E_INITIAL
  41  0000                              CALL_   EXTEND_FUNCTION_2F_INITIAL
  42  0000                              CALL_   EXTEND_FUNCTION_2G_INITIAL
  43  0000                              CALL_   EXTEND_FUNCTION_2H_INITIAL
  44  0000                              ENDM
  45  0000              
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 2

  46  0000              EXTEND_FUNCTION MACRO
  47  0000                              CALL_   EXTEND_FUNCTION_1A
  48  0000                              CALL_   EXTEND_FUNCTION_1B
  49  0000                              CALL_   EXTEND_FUNCTION_1C
  50  0000                              CALL_   EXTEND_FUNCTION_1D
  51  0000                              CALL_   EXTEND_FUNCTION_1E
  52  0000                              CALL_   EXTEND_FUNCTION_1F
  53  0000                              CALL_   EXTEND_FUNCTION_1G
  54  0000                              CALL_   EXTEND_FUNCTION_1H
  55  0000              
  56  0000                              CALL_   EXTEND_FUNCTION_2A
  57  0000                              CALL_   EXTEND_FUNCTION_2B
  58  0000                              CALL_   EXTEND_FUNCTION_2C
  59  0000                              CALL_   EXTEND_FUNCTION_2D
  60  0000                              CALL_   EXTEND_FUNCTION_2E
  61  0000                              CALL_   EXTEND_FUNCTION_2F
  62  0000                              CALL_   EXTEND_FUNCTION_2G
  63  0000                              CALL_   EXTEND_FUNCTION_2H
  64  0000                              ENDM
  65  0000                              ;==============
  66  0000                              ;=DATA SETCTION
  67  0000                              ;==============
  68  0000              MAIN_DATA       .SECTION          'DATA'
  69  0000              
  70  0000              ifndef  ESCpowerIDcheck
  71  0000  0002[       POR_ID          DB      2 DUP(?)
            00
            ]
  72  0002              endif
  73  0002              
  74  0002              
  75  0002              
  76  0002                              ;==============
  77  0002                              ;=CODE SETCTION
  78  0002                              ;==============
  79  0000              PROGRAM_ENTRY   .SECTION  AT 000H 'CODE'
  80  0000                      ifdef   PBP
  81  0000                              CLR     PBP
  82  0000                              ifndef  ESCpowerIDcheck
  83  0000                              MOV     A,042H      ;ASCII = B
  84  0000                              endif
  85  0000                      else
  86  0000                              ;----------------
  87  0000                              ;-SET POR ID 1---
  88  0000                              ;----------------
  89  0000                              ifndef  ESCpowerIDcheck
  90  0000  0F42                        MOV     A,042H      ;ASCII = B
  91  0001  3A8A                        SNZ     TO
  92  0002  0080     R                  MOV     POR_ID[0],A
  93  0003                              endif
  94  0003                      endif
  95  0003                      		
  96  0003  2800     R                  JMP     PROGRAM_RESET
  97  0004              
  98  0004                              ;==============
  99  0004                              ;=MAIN PROGRAM=
 100  0004                              ;==============
 101  0000              MAIN_PROGRAM    .SECTION          'CODE'
 102  0000              
 103  0000                              ;;***********************
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 3

 104  0000              PROGRAM_RESET:  ;;* PROGRAM ENTRY *******
 105  0000                              ;;***********************
 106  0000                      ifdef   PBP
 107  0000                              ifndef  ESCpowerIDcheck
 108  0000                              SNZ     TO
 109  0000                              MOV     POR_ID[0],A
 110  0000                              endif
 111  0000                      endif
 112  0000                              ;----------------
 113  0000                              ;-SET POR ID 2---
 114  0000                              ;----------------
 115  0000                      ifndef  ESCpowerIDcheck
 116  0000  0F53                        MOV     A,053H      ;ASCII = S
 117  0001  0080     R                  MOV     POR_ID[1],A
 118  0002                      endif
 119  0002              
 120  0002              
 121  0002                              ;---------------------
 122  0002                              ;-MCU HARDWARE INITIAL
 123  0002                              ;---------------------
 124  0002                              MCU_HARDWARE_INITIAL
 124  0002            1                 ifdef   _BS83A02A_
 124  0002            1                         MOV     A,00000011B
 124  0002            1                         MOV [0BH],A
 124  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  0002            1                       ;;MOV     A,01010011B     ;500   MS
 124  0002            1                         MOV     A,01010010B     ;125   MS
 124  0002            1                         MOV [01AH],A
 124  0002            1                         ;-IF POWER SAVING MODE ENABLE
 124  0002            1                         if 0==1
 124  0002            1                         SZ [0AH].5
 124  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  0002            1                         endif
 124  0002            1                         ;-CLEAR BANK0 060H~0FFH
 124  0002            1                         MOV     A,60H
 124  0002            1                         CALL    CLEAR_RAM
 124  0002            1                 endif
 124  0002            1                 ;--------------------------------
 124  0002            1                 ;-INITIAL FOR BS83A04A  ---------
 124  0002            1                 ;--------------------------------
 124  0002            1                 ifdef   _BS83A04A_
 124  0002            1                         MOV     A,00000011B
 124  0002            1                         MOV [0BH],A
 124  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  0002            1                       ;;MOV     A,01010011B     ;500   MS
 124  0002            1                         MOV     A,01010010B     ;125   MS
 124  0002            1                         MOV [01AH],A
 124  0002            1                         ;-IF POWER SAVING MODE ENABLE
 124  0002            1                         if 0==1
 124  0002            1                         SZ [0AH].5
 124  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  0002            1                         endif
 124  0002            1                         ;-CLEAR BANK0 060H~0FFH
 124  0002            1                         MOV     A,60H
 124  0002            1                         CALL    CLEAR_RAM
 124  0002            1                 endif
 124  0002            1 
 124  0002            1                 ;--------------------------------
 124  0002            1                 ;-INITIAL FOR BS83B04A  ---------
 124  0002            1                 ;--------------------------------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 4

 124  0002            1                 ifdef   _BS83B04A_
 124  0002            1                         MOV     A,00000011B
 124  0002            1                         MOV [0BH],A
 124  0002            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  0002            1                       ;;MOV     A,01010011B     ;500   MS
 124  0002            1                         MOV     A,01010010B     ;125   MS
 124  0002            1                         MOV [01AH],A
 124  0002            1                         ;-IF POWER SAVING MODE ENABLE
 124  0002            1                         if 0==1
 124  0002            1                         SZ [0AH].5
 124  0002            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  0002            1                         endif
 124  0002            1                         ;-CLEAR BANK0 060H~0FFH
 124  0002            1                         MOV     A,60H
 124  0002            1                         CALL    CLEAR_RAM
 124  0002            1                 endif
 124  0002            1 
 124  0002            1                 ;--------------------------------
 124  0002            1                 ;-INITIAL FOR BS83B08A  ---------
 124  0002            1                 ;--------------------------------
 124  0002            1                 ifdef   _BS83B08A_
 124  0002            1                         ;-SET SYSTEM CLOCK
 124  0002  0F30      1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  0003  008C      1                         MOV [0CH],A
 124  0004            1                         ;--
 124  0004  0F03      1                         MOV     A,00000011B
 124  0005  008B      1                         MOV [0BH],A
 124  0006            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  0006            1                       ;;MOV     A,01010011B     ;500   MS
 124  0006  0F52      1                         MOV     A,01010010B     ;125   MS
 124  0007  009A      1                         MOV [01AH],A
 124  0008            1                         ;-IF POWER SAVING MODE ENABLE
 124  0008            1                         if 0==1
 124  0008            1                         SZ [0AH].5
 124  0008            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  0008            1                         endif
 124  0008            1                         ;-CLEAR BANK0 060H~0FFH
 124  0008  0F60      1                         MOV     A,60H
 124  0009  2000     R1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B12A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B12A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 5

 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B16A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84B06A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84B06A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 6

 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84B08A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84B08A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84C12A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84C12A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 7

 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK2 280H~2DFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84C16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84C16A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 8

 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84D20A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84D20A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 9

 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS82B16   ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS82B16_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1 
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS82B12A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS82B12A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 10

 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS82C16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS82C16A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 11

 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS82D20A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS82D20A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS45FH21  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS45FH21_
 124  000A            1 
 124  000A            1 
 124  000A            1                         ;CLR     SCC
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 12

 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1               ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66F340  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66F340_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 13

 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66F350  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66F350_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 14

 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66F360  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66F360_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 15

 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS67F340  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS67F340_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 16

 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS67F350  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS67F350_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 17

 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS67F360  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS67F360_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 18

 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66FV340  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66FV340_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;;;;;;-CLEAR BANK7 780H~7FFH
 124  000A            1                         ;;;;;MOV     A,7
 124  000A            1                         ;;;;;MOV     BP,A
 124  000A            1                         ;;;;;MOV     A,80H
 124  000A            1                         ;;;;;CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;;;;;;-CLEAR BANK4 480H~2FFH
 124  000A            1                         ;;;;;MOV     A,4
 124  000A            1                         ;;;;;MOV     BP,A
 124  000A            1                         ;;;;;MOV     A,80H
 124  000A            1                         ;;;;;CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 19

 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66FV350  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66FV350_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;;;;;;-CLEAR BANK7 780H~7FFH
 124  000A            1                         ;;;;;MOV     A,7
 124  000A            1                         ;;;;;MOV     BP,A
 124  000A            1                         ;;;;;MOV     A,80H
 124  000A            1                         ;;;;;CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 20

 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66FV360  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66FV360_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 21

 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86B12A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86B12A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                       ;;;-CLEAR BANK3 380H~2FFH
 124  000A            1                       ;;MOV     A,3
 124  000A            1                       ;;MOV     BP,A
 124  000A            1                       ;;MOV     A,80H
 124  000A            1                       ;;CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 22

 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86C16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86C16A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86D20A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86D20A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 23

 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS87C16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS87C16A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 24

 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS66F370  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS66F370_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1 
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK11 0B80H~7FFH
 124  000A            1                         MOV     A,11
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK10 0A80H~7FFH
 124  000A            1                         MOV     A,10
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 25

 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK9 980H~7FFH
 124  000A            1                         MOV     A,9
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK8 880H~7FFH
 124  000A            1                         MOV     A,8
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK6 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS67F370  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS67F370_
 124  000A            1 
 124  000A            1                         ;CLR     SCC
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 26

 124  000A            1                         MOV     A,00011111B     ;FH=Fsys/1
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1 
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK11 0B80H~7FFH
 124  000A            1                         MOV     A,11
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK10 0A80H~7FFH
 124  000A            1                         MOV     A,10
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK9 980H~7FFH
 124  000A            1                         MOV     A,9
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK8 880H~7FFH
 124  000A            1                         MOV     A,8
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK7 780H~7FFH
 124  000A            1                         MOV     A,7
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK6 680H~6FFH
 124  000A            1                         MOV     A,6
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 27

 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS87C16A  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS87B12A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS87D20A  ---------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 28

 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS87D20A_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK5 580H~5FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~4FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~3FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84B08C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84B08C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 29

 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B08C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B08C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 060H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,60H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS45F5930 ---------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 30

 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS45F5930_
 124  000A            1                         MOV     A,00011111B
 124  000A            1                         ANDM    A,SCC
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK0 040H~0FFH
 124  000A            1                         MOV     A,40H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86C08C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86C08C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,00000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 31

 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86D12C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86D12C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,00000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1                         ;-CLEAR BANK3 280H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS86E16C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS86E16C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)&00110000B)
 124  000A            1                         MOV [0CH],A          ;BIT7=FSYSON
 124  000A            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,00000011B
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 32

 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,00000000B
 124  000A            1                         MOV     SADC0,A
 124  000A            1                         CLR     SADC1
 124  000A            1                         ;-CLEAR BANK5 580H~2FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~2FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B24C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B24C_
 124  000A            1 
 124  000A            1                         MOV     A,00011111B
 124  000A            1                         ANDM    A,SCC
 124  000A            1                         ;--                        ;BIT3:BIT2=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A          ;
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 33

 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK3 280H~2FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B12C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B12C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK3 080H~0FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 080H~0FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 34

 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B16C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B16C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK3 080H~0FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 080H~0FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83B04C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83B04C_
 124  000A            1                         MOV     A,(( 0<<2)|(1<<0))
 124  000A            1                         MOV     HIRCC,A
 124  000A            1 
 124  000A            1                         MOV     A,00000000B
 124  000A            1                         MOV     SCC,A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 35

 124  000A            1 					  ;;MOV     A,01010010B     ;125   MS
 124  000A            1 						MOV     A,01010100B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1 
 124  000A            1                 endif
 124  000A            1 
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS83C40C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS83C40C_
 124  000A            1 
 124  000A            1                         MOV     A,00011111B
 124  000A            1                         ANDM    A,SCC
 124  000A            1                         ;--                        ;BIT3:BIT2=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 124  000A            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 124  000A            1                         MOV     HIRCC,A          ;
 124  000A            1 
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-CLEAR BANK5 580H~5FFH
 124  000A            1                         MOV     A,5
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK4 480H~4FFH
 124  000A            1                         MOV     A,4
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK3 380H~3FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 280H~2FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 180H~1FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 36

 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 124  000A            1                 ;--------------------------------
 124  000A            1                 ;-INITIAL FOR BS84C12C  ---------
 124  000A            1                 ;--------------------------------
 124  000A            1                 ifdef   _BS84C12C_
 124  000A            1                         ;-SET SYSTEM CLOCK
 124  000A            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 124  000A            1                         MOV [0CH],A
 124  000A            1                         ;--
 124  000A            1                         MOV     A,00000011B
 124  000A            1                         MOV [0BH],A
 124  000A            1                         ;-WDT INITIAL USE 125/500MS WHEN ENABLE POWER SAVE MODE
 124  000A            1                       ;;MOV     A,01010011B     ;500   MS
 124  000A            1                         MOV     A,01010010B     ;125   MS
 124  000A            1                         MOV [01AH],A
 124  000A            1                         ;-IF POWER SAVING MODE ENABLE
 124  000A            1                         if 0==1
 124  000A            1                         SZ [0AH].5
 124  000A            1                         JMP     WDT_WAKEUP      ;IF WAKEUP BY WDT TIME OUT
 124  000A            1                         endif
 124  000A            1                         ;-DISABLE ADC
 124  000A            1                         CLR     ACERL
 124  000A            1                         MOV     A,01100000B
 124  000A            1                         MOV     ADCR0,A
 124  000A            1                         CLR     ADCR1
 124  000A            1 
 124  000A            1                         ;-CLEAR BANK3 080H~0FFH
 124  000A            1                         MOV     A,3
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK2 080H~0FFH
 124  000A            1                         MOV     A,2
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK1 080H~0FFH
 124  000A            1                         MOV     A,1
 124  000A            1                         MOV [04H],A
 124  000A            1                         MOV     A,80
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                         ;-CLEAR BANK0 080H~0FFH
 124  000A            1                         CLR [04H]
 124  000A            1                         MOV     A,80H
 124  000A            1                         CALL    CLEAR_RAM
 124  000A            1                 endif
 125  000A              
 126  000A                              ;------------------------------
 127  000A                              ;-LOAD LIBRARY OPTION/THRESHOLD
 128  000A                              ;------------------------------
 129  000A  2000     R                  CALL    _LOAD_TKS_GLOBE_VARIES
 130  000B              
 131  000B                              ;------------------------
 132  000B                              ;-EXTEND FUNCTION INITIAL
 133  000B                              ;------------------------
 134  000B                              EXTEND_FUNCTION_INITIAL
 134  000B            1                 CALL_   EXTEND_FUNCTION_1A_INITIAL
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 37

 134  000B            2         ifdef EXTEND_FUNCTION_1A_INITIAL
 134  000B            2                 ifdef   PBP
 134  000B            2                 MOV     A,bank _BS83B08A_CTOUCH_WATER_V501_INITIAL
 134  000B            2                 MOV     PBP,A
 134  000B            2                 endif
 134  000B  2000     E2                 CALL _BS83B08A_CTOUCH_WATER_V501_INITIAL
 134  000C            2         endif
 134  000C            1                 CALL_   EXTEND_FUNCTION_1B_INITIAL
 134  000C            2         ifdef EXTEND_FUNCTION_1B_INITIAL
 134  000C            2                 ifdef   PBP
 134  000C            2                 MOV     A,bank _EEPROM_PROGRAM_INITIAL
 134  000C            2                 MOV     PBP,A
 134  000C            2                 endif
 134  000C  2000     E2                 CALL _EEPROM_PROGRAM_INITIAL
 134  000D            2         endif
 134  000D            1                 CALL_   EXTEND_FUNCTION_1C_INITIAL
 134  000D            2         ifdef EXTEND_FUNCTION_1C_INITIAL
 134  000D            2                 ifdef   PBP
 134  000D            2                 MOV     A,bank EXTEND_FUNCTION_1C_INITIAL
 134  000D            2                 MOV     PBP,A
 134  000D            2                 endif
 134  000D            2                 CALL EXTEND_FUNCTION_1C_INITIAL
 134  000D            2         endif
 134  000D            1                 CALL_   EXTEND_FUNCTION_1D_INITIAL
 134  000D            2         ifdef EXTEND_FUNCTION_1D_INITIAL
 134  000D            2                 ifdef   PBP
 134  000D            2                 MOV     A,bank EXTEND_FUNCTION_1D_INITIAL
 134  000D            2                 MOV     PBP,A
 134  000D            2                 endif
 134  000D            2                 CALL EXTEND_FUNCTION_1D_INITIAL
 134  000D            2         endif
 134  000D            1                 CALL_   EXTEND_FUNCTION_1E_INITIAL
 134  000D            2         ifdef EXTEND_FUNCTION_1E_INITIAL
 134  000D            2                 ifdef   PBP
 134  000D            2                 MOV     A,bank EXTEND_FUNCTION_1E_INITIAL
 134  000D            2                 MOV     PBP,A
 134  000D            2                 endif
 134  000D            2                 CALL EXTEND_FUNCTION_1E_INITIAL
 134  000D            2         endif
 134  000D            1                 CALL_   EXTEND_FUNCTION_1F_INITIAL
 134  000D            2         ifdef EXTEND_FUNCTION_1F_INITIAL
 134  000D            2                 ifdef   PBP
 134  000D            2                 MOV     A,bank _USER_PROGRAM_INITIAL
 134  000D            2                 MOV     PBP,A
 134  000D            2                 endif
 134  000D  2000     E2                 CALL _USER_PROGRAM_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_1G_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_1G_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_1G_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_1G_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_1H_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_1H_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_1H_INITIAL
 134  000E            2                 MOV     PBP,A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 38

 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_1H_INITIAL
 134  000E            2         endif
 134  000E            1 
 134  000E            1                 CALL_   EXTEND_FUNCTION_2A_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2A_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2A_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2A_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2B_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2B_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2B_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2B_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2C_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2C_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2C_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2C_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2D_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2D_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2D_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2D_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2E_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2E_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2E_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2E_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2F_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2F_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2F_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2F_INITIAL
 134  000E            2         endif
 134  000E            1                 CALL_   EXTEND_FUNCTION_2G_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2G_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2G_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2G_INITIAL
 134  000E            2         endif
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 39

 134  000E            1                 CALL_   EXTEND_FUNCTION_2H_INITIAL
 134  000E            2         ifdef EXTEND_FUNCTION_2H_INITIAL
 134  000E            2                 ifdef   PBP
 134  000E            2                 MOV     A,bank EXTEND_FUNCTION_2H_INITIAL
 134  000E            2                 MOV     PBP,A
 134  000E            2                 endif
 134  000E            2                 CALL EXTEND_FUNCTION_2H_INITIAL
 134  000E            2         endif
 135  000E              
 136  000E                              ;;-----------------------
 137  000E              MAIN_LOOP:      ;;- MAIN PROGRAM LOOP ---
 138  000E                              ;;-----------------------
 139  000E  0001                        CLR     WDT
 140  000F  0001                        CLR     WDT1
 141  0010  0005                        CLR     WDT2
 142  0011              
 143  0011              
 144  0011                              ;----------------
 145  0011                              ;-CHECK POR ID --
 146  0011                              ;----------------
 147  0011                      ifndef  ESCpowerIDcheck
 148  0011  0F42                        MOV     A,042H
 149  0012  0480     R                  XORM    A,POR_ID[0]
 150  0013  0F53                        MOV     A,053H
 151  0014  3D0A                        SZ      Z
 152  0015  0480     R                  XORM    A,POR_ID[1]
 153  0016  390A                        SNZ     Z
 154  0017  2800                        JMP     000H
 155  0018                      endif
 156  0018                              ;----------------------
 157  0018                              ;-RE INITIAL SYS. CLOCK
 158  0018                              ;----------------------
 159  0018                              RELOAD_SYS_CLOCK
 159  0018            1                 ifdef   _BS83A02A_
 159  0018            1                         MOV     A,00000011B
 159  0018            1                         MOV [0BH],A
 159  0018            1 
 159  0018            1                 endif
 159  0018            1 
 159  0018            1 
 159  0018            1                 ;--------------------------------
 159  0018            1                 ;-INITIAL FOR BS83A04A  ---------
 159  0018            1                 ;--------------------------------
 159  0018            1                 ifdef   _BS83A04A_
 159  0018            1                         MOV     A,00000011B
 159  0018            1                         MOV [0BH],A
 159  0018            1                 endif
 159  0018            1 
 159  0018            1                 ;--------------------------------
 159  0018            1                 ;-INITIAL FOR BS83B04A  ---------
 159  0018            1                 ;--------------------------------
 159  0018            1                 ifdef   _BS83B04A_
 159  0018            1                         MOV     A,00000011B
 159  0018            1                         MOV [0BH],A
 159  0018            1                 endif
 159  0018            1 
 159  0018            1                 ;--------------------------------
 159  0018            1                 ;-INITIAL FOR BS83B08A  ---------
 159  0018            1                 ;--------------------------------
 159  0018            1                 ifdef   _BS83B08A_
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 40

 159  0018            1                         ;-SET SYSTEM CLOCK
 159  0018  0F30      1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  0019  008C      1                         MOV [0CH],A
 159  001A            1                         ;--
 159  001A  0F03      1                         MOV     A,00000011B
 159  001B  008B      1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B12A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B12A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B16A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B16A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84B06A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84B06A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                       ;;MOV     A,(SystemClock<<4)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84B08A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84B08A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84C12A  ---------
 159  001C            1                 ;--------------------------------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 41

 159  001C            1                 ifdef   _BS84C12A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84C16A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84C16A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84D20A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84D20A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS82B16   ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS82B16_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS82B12A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS82B12A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 42

 159  001C            1                 ;-INITIAL FOR BS82C16A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS82C16A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS82D20A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS82D20A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS45FH21  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS45FH21_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         SET     HIRCEN
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66F340  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66F340_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66F350  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66F350_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66F360  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66F360_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 43

 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS67F340  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS67F340_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS67F350  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS67F350_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS67F360  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS67F360_
 159  001C            1                         ;CLR     SCC             ;FH=Fsys/1
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66FV340  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66FV340_
 159  001C            1                         MOV     A,00011111B     ;FH=Fsys/1
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66FV350  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66FV350_
 159  001C            1                         MOV     A,00011111B     ;FH=Fsys/1
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS66FV360  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS66FV360_
 159  001C            1                         MOV     A,00011111B     ;FH=Fsys/1
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 44

 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86B12A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86B12A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86C16A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86C16A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86D20A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86D20A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS87C16A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS87C16A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS87B12A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS87B12A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 45

 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS87D20A  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS87D20A_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1 
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS45F5930  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS45F5930_
 159  001C            1                         MOV     A,00000000B
 159  001C            1                         ;MOV     SMOD,A
 159  001C            1                         MOV     SCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86C08C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86C08C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86D12C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86D12C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS86E16C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS86E16C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)&00110000B);;|10000000B
 159  001C            1                         MOV [0CH],A          ;BIT7=FSYSON
 159  001C            1                         ;--                     ;BIT5:BIT4=00/11:8MHZ ; 01:12MHZ ; 10:16MHZ
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 46

 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B24C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B24C_
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B08C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B08C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B12C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B12C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B16C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B16C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83B04C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83B04C_
 159  001C            1                         MOV     A,(( 0<<2)|(1<<0))
 159  001C            1                         MOV     HIRCC,A
 159  001C            1 
 159  001C            1                         MOV     A,00000000B
 159  001C            1                         MOV     SCC,A
 159  001C            1                 endif
 159  001C            1 
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS83C40C  ---------
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 47

 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS83C40C_
 159  001C            1                         MOV     A,00011111B
 159  001C            1                         ANDM    A,SCC
 159  001C            1                         MOV     A,(( 0<<2)&00001100B)|00000001B
 159  001C            1                         MOV     HIRCC,A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84B08C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84B08C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 159  001C            1                 ;--------------------------------
 159  001C            1                 ;-INITIAL FOR BS84C12C  ---------
 159  001C            1                 ;--------------------------------
 159  001C            1                 ifdef   _BS84B08C_
 159  001C            1                         ;-SET SYSTEM CLOCK
 159  001C            1                         MOV     A,(( 0<<4)^00110000B)&00110000B
 159  001C            1                         MOV [0CH],A
 159  001C            1                         ;--
 159  001C            1                         MOV     A,00000011B
 159  001C            1                         MOV [0BH],A
 159  001C            1                 endif
 160  001C                              EXTEND_FUNCTION
 160  001C            1                 CALL_   EXTEND_FUNCTION_1A
 160  001C            2         ifdef EXTEND_FUNCTION_1A
 160  001C            2                 ifdef   PBP
 160  001C            2                 MOV     A,bank _BS83B08A_CTOUCH_WATER_V501
 160  001C            2                 MOV     PBP,A
 160  001C            2                 endif
 160  001C  2000     E2                 CALL _BS83B08A_CTOUCH_WATER_V501
 160  001D            2         endif
 160  001D            1                 CALL_   EXTEND_FUNCTION_1B
 160  001D            2         ifdef EXTEND_FUNCTION_1B
 160  001D            2                 ifdef   PBP
 160  001D            2                 MOV     A,bank _EEPROM_PROGRAM
 160  001D            2                 MOV     PBP,A
 160  001D            2                 endif
 160  001D  2000     E2                 CALL _EEPROM_PROGRAM
 160  001E            2         endif
 160  001E            1                 CALL_   EXTEND_FUNCTION_1C
 160  001E            2         ifdef EXTEND_FUNCTION_1C
 160  001E            2                 ifdef   PBP
 160  001E            2                 MOV     A,bank EXTEND_FUNCTION_1C
 160  001E            2                 MOV     PBP,A
 160  001E            2                 endif
 160  001E            2                 CALL EXTEND_FUNCTION_1C
 160  001E            2         endif
 160  001E            1                 CALL_   EXTEND_FUNCTION_1D
 160  001E            2         ifdef EXTEND_FUNCTION_1D
 160  001E            2                 ifdef   PBP
 160  001E            2                 MOV     A,bank EXTEND_FUNCTION_1D
 160  001E            2                 MOV     PBP,A
 160  001E            2                 endif
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 48

 160  001E            2                 CALL EXTEND_FUNCTION_1D
 160  001E            2         endif
 160  001E            1                 CALL_   EXTEND_FUNCTION_1E
 160  001E            2         ifdef EXTEND_FUNCTION_1E
 160  001E            2                 ifdef   PBP
 160  001E            2                 MOV     A,bank EXTEND_FUNCTION_1E
 160  001E            2                 MOV     PBP,A
 160  001E            2                 endif
 160  001E            2                 CALL EXTEND_FUNCTION_1E
 160  001E            2         endif
 160  001E            1                 CALL_   EXTEND_FUNCTION_1F
 160  001E            2         ifdef EXTEND_FUNCTION_1F
 160  001E            2                 ifdef   PBP
 160  001E            2                 MOV     A,bank _USER_PROGRAM
 160  001E            2                 MOV     PBP,A
 160  001E            2                 endif
 160  001E  2000     E2                 CALL _USER_PROGRAM
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_1G
 160  001F            2         ifdef EXTEND_FUNCTION_1G
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_1G
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_1G
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_1H
 160  001F            2         ifdef EXTEND_FUNCTION_1H
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_1H
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_1H
 160  001F            2         endif
 160  001F            1 
 160  001F            1                 CALL_   EXTEND_FUNCTION_2A
 160  001F            2         ifdef EXTEND_FUNCTION_2A
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2A
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2A
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2B
 160  001F            2         ifdef EXTEND_FUNCTION_2B
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2B
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2B
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2C
 160  001F            2         ifdef EXTEND_FUNCTION_2C
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2C
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2C
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2D
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 49

 160  001F            2         ifdef EXTEND_FUNCTION_2D
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2D
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2D
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2E
 160  001F            2         ifdef EXTEND_FUNCTION_2E
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2E
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2E
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2F
 160  001F            2         ifdef EXTEND_FUNCTION_2F
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2F
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2F
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2G
 160  001F            2         ifdef EXTEND_FUNCTION_2G
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2G
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2G
 160  001F            2         endif
 160  001F            1                 CALL_   EXTEND_FUNCTION_2H
 160  001F            2         ifdef EXTEND_FUNCTION_2H
 160  001F            2                 ifdef   PBP
 160  001F            2                 MOV     A,bank EXTEND_FUNCTION_2H
 160  001F            2                 MOV     PBP,A
 160  001F            2                 endif
 160  001F            2                 CALL EXTEND_FUNCTION_2H
 160  001F            2         endif
 161  001F                              ;----------------
 162  001F                              ;-SET POR ID  ---
 163  001F                              ;----------------
 164  001F                      ifndef  ESCpowerIDcheck
 165  001F  0F42                        MOV     A,042H      ;ASCII = B
 166  0020  0080     R                  MOV     POR_ID[0],A
 167  0021  0F53                        MOV     A,053H      ;ASCII = S
 168  0022  0080     R                  MOV     POR_ID[1],A
 169  0023                      endif
 170  0023              
 171  0023                              ;--------------------
 172  0023              WDT_WAKEUP:     ;-WDT WAKEUP FUNCTION
 173  0023                              ;--------------------
 174  0023              ;                if      PowerSave==1
 175  0023              ;                CALL_   _CHECK_KEY_WAKEUP
 176  0023              ;                endif
 177  0023              
 178  0023                              ifdef   PBP
 179  0023                              MOV     A,BANK MAIN_LOOP
 180  0023                              MOV     PBP,A
 181  0023                              endif
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 50

 182  0023  2800     R                  JMP     MAIN_LOOP
 183  0024              
 184  0024              
 185  0024              
 186  0024              
 187  0024              
 188  0024              
 189  0024              
 190  0024              
 191  0024              
 192  0024              ;;***********************************************************
 193  0024              ;;*SUB. NAME:                                               *
 194  0024              ;;*INPUT    :                                               *
 195  0024              ;;*OUTPUT   :                                               *
 196  0024              ;;*USED REG.:                                               *
 197  0024              ;;*FUNCTION :                                               *
 198  0024              ;;***********************************************************
 199  0024              CLEAR_RAM:
 200  0024  0083                        MOV     MP1,A
 201  0025                      ifndef  ESCpowerIDcheck
 202  0025                          ifdef  BP
 203  0025                              ;-CHECK BANK
 204  0025  1084                        SZ      BP
 205  0026  2800     R                  JMP     CLR_RAM
 206  0027                          endif
 207  0027                              ;-CHECK POR_ID RAM
 208  0027  0F00     R                  MOV     A,OFFSET POR_ID
 209  0028  0403                        XOR     A,MP1
 210  0029  0F00     R                  MOV     A,OFFSET POR_ID+1
 211  002A  390A                        SNZ     Z
 212  002B  0403                        XOR     A,MP1
 213  002C  390A                        SNZ     Z
 214  002D                      endif
 215  002D              CLR_RAM:        ;-CLEAR RAM
 216  002D  1F02                        CLR     IAR1
 217  002E  1603                        SIZA    MP1
 218  002F  2800     R                  JMP     CLEAR_RAM
 219  0030              
 220  0030  0003                        RET
 221  0031              
 222  0031              
 223  0031              ;;***********************************************************
 224  0031              ;;*SUB. NAME:                                               *
 225  0031              ;;*INPUT    :                                               *
 226  0031              ;;*OUTPUT   :                                               *
 227  0031              ;;*USED REG.:                                               *
 228  0031              ;;*FUNCTION :                                               *
 229  0031              ;;***********************************************************
 230  0031              _LOAD_TKS_GLOBE_VARIES:
 231  0031              _LOAD_HXT_REFERENCE:
 232  0031                              ;------------------------
 233  0031                              ;-SET TKS LIBRARY OPTION-
 234  0031                              ;------------------------
 235  0031  0F75                        MOV     A,GlobeOptionA
 236  0032  0080     E                  MOV     _GLOBE_VARIES[0],A
 237  0033  0F31                        MOV     A,GlobeOptionB
 238  0034  0080     E                  MOV     _GLOBE_VARIES[1],A
 239  0035  0F98                        MOV     A,GlobeOptionC
 240  0036  0080     E                  MOV     _GLOBE_VARIES[2],A
 241  0037              				
"File: MAIN_PROGRAM_V102.asm  Assembler  Version 2.98      Page 51

 242  0037                              ;--------------------------
 243  0037                              ;-SET TOUCH OR IO ATTRIBUTE
 244  0037                              ;--------------------------
 245  0037                              
 246  0037  0FFF                        MOV     A,IO_TOUCH_ATTR&0FFH
 247  0038  0080     E                  MOV     _KEY_IO_SEL[0],A
 248  0039                              ;-IF OVER 2 TOUCH IP (8~16KEY)
 249  0039                              if      KeyAmount > 8
 250  0039                              MOV     A,(IO_TOUCH_ATTR>>8)&0FFH
 251  0039                              MOV     _KEY_IO_SEL[1],A
 252  0039                              endif
 253  0039                              ;-IF OVER 4 TOUCH IP (17~24KEY)
 254  0039                              if      KeyAmount > 16
 255  0039                              MOV     A,(IO_TOUCH_ATTR>>16)&0FFH
 256  0039                              MOV     _KEY_IO_SEL[2],A
 257  0039                              endif
 258  0039                              ;-IF OVER 6 TOUCH IP (25~32KEY)
 259  0039                              if      KeyAmount > 24
 260  0039                              MOV     A,(IO_TOUCH_ATTR>>24)&0FFH
 261  0039                              MOV     _KEY_IO_SEL[3],A
 262  0039                              endif
 263  0039              
 264  0039                              ;------------------------
 265  0039                              ;-SET TOUCH KEY THRESHOLD
 266  0039                              ;------------------------
 267  0039                              ;-KEY1 THRESHOLD
 268  0039  0F40                        MOV     A,Key1Threshold
 269  003A  0080     E                  MOV     _GLOBE_VARIES[3],A
 270  003B              
 271  003B                              ;-KEY2 THRESHOLD
 272  003B  0F10                        MOV     A,Key2Threshold
 273  003C  0080     E                  MOV     _GLOBE_VARIES[4],A
 274  003D              
 275  003D                              ;-KEY3 THRESHOLD
 276  003D  0F10                        MOV     A,Key3Threshold
 277  003E  0080     E                  MOV     _GLOBE_VARIES[5],A
 278  003F              
 279  003F                              ;-KEY4 THRESHOLD
 280  003F  0F20                        MOV     A,Key4Threshold
 281  0040  0080     E                  MOV     _GLOBE_VARIES[6],A
 282  0041              
 283  0041  0003                        RET
 284  0042              
 285  0042              
 286  0042              
 287  0042              
 288  0042                              END


        0 Errors, 0 Warnings